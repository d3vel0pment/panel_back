import{r as t,o as e,c as a,a as o,t as s,b as n,s as l,d as r,e as i,f as c,g as d,w as u,h as p,V as m,i as g,T as h,j as y,k as f,l as v,m as k,n as C,p as _,y as S,q as D,u as b,v as P,x as w}from"./vendor.088e19da.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const a of t)if("childList"===a.type)for(const t of a.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var T=(t,e)=>{for(const[a,o]of e)t[a]=o;return t};const $={class:"card"},x={class:"row"},I={class:"row center"},z={class:"normal"};const E={class:"gridContainer"},V={class:"statsContainer"},L={class:"statsContainerItem"},j={class:"statsContainerItem"},N={class:"statsContainerItem"},O={class:"statsContainerItem"},A={ref:"xxd",class:"barchartContainer"};var R=T({components:{Chart:l,Grid:r,Line:i,Responsive:c,cardComponent:T({props:{title:String,icon:String,content:String}},[["render",function(l,r,i,c,d,u){const p=t("it-icon");return e(),a("div",$,[o("div",x,[o("h3",null,s(i.title),1),n(p,{outlined:"",name:i.icon},null,8,["name"])]),o("div",I,[o("h2",z,s(i.content),1)])])}],["__scopeId","data-v-442ce0a7"]])},data:()=>({statsData:null,flag:!1,lineStyle:{strokeWidth:"4px"},dotStyle:{strokeWidth:"16px",strokeDasharray:"1px"},data:[{name:"Янв",pl:1e3,avg:500,inc:300},{name:"Фев",pl:2e3,avg:900,inc:400},{name:"Мар",pl:400,avg:400,inc:500},{name:"Апр",pl:3100,avg:1300,inc:700},{name:"Май",pl:200,avg:100,inc:200},{name:"Июн",pl:600,avg:400,inc:300},{name:"Июл",pl:500,avg:90,inc:100}]}),computed:{getH(){return this.$refs.xxd.clientHeight}},mounted(){this.flag=!0}},[["render",function(s,l,r,i,c,m){const g=t("cardComponent"),h=t("Line"),y=t("Chart"),f=t("Responsive");return e(),a("section",null,[o("div",E,[o("div",V,[o("div",L,[n(g,{title:"Карт всего",icon:"schedule",content:s.$store.state.data.statsData.amount},null,8,["content"])]),o("div",j,[n(g,{title:"Карт сегодня",icon:"today",content:s.$store.state.data.statsData.today},null,8,["content"])]),o("div",N,[n(g,{title:"Количество форм",icon:"contact_mail",content:s.$store.state.data.statsData.forms},null,8,["content"])]),o("div",O,[n(g,{title:"Количество редиректов",icon:"wrap_text",content:s.$store.state.data.statsData.redirects},null,8,["content"])])]),o("div",A,[c.flag?(e(),d(f,{key:0,class:"w-full"},{main:u((({width:t})=>[n(y,{size:{width:t,height:m.getH},margin:{top:20,bottom:20,left:20,right:20},data:s.$store.state.data.statsData.entriesByMonths},{layers:u((()=>[n(h,{type:"normal",dotStyle:c.dotStyle,lineStyle:c.lineStyle,dataKeys:["month","entries"]},null,8,["dotStyle","lineStyle"])])),_:2},1032,["size","data"])])),_:1})):p("",!0),c.flag?(e(),d(f,{key:1,class:"w-full"},{main:u((({width:t})=>[n(y,{size:{width:t,height:m.getH},margin:{top:20,bottom:20,left:20,right:20},data:s.$store.state.data.statsData.entriesByDays},{layers:u((()=>[n(h,{type:"normal",dotStyle:c.dotStyle,lineStyle:c.lineStyle,dataKeys:["day","entries"]},null,8,["dotStyle","lineStyle"])])),_:2},1032,["size","data"])])),_:1})):p("",!0)],512)])])}]]),H=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:R});const M={class:""};const q={class:"gridContainer"},K={class:"statsContainer"},W={class:"statsContainerItem"},B={key:0,class:"cal"},F={class:"buttons"},G={key:1,class:"cal"},J={class:"buttons"},U={class:"barchartContainer"};var Z=T({components:{VGrid:m,cellComponent:T({},[["render",function(t,o,s,n,l,r){return e(),a("div",M,"Hey")}]])},data:()=>({date:null,toggleCal:"initial",columns:[{prop:"shop",name:"Shop",sortable:!0,order:"asc",size:200,pin:"colPinStart"},{prop:"type",name:"Type",sortable:!0,order:"asc",size:100,pin:"colPinStart"},{prop:"name",name:"Name",sortable:!0,order:"asc",size:200},{prop:"country",name:"Country",sortable:!0,order:"asc",size:200},{prop:"city",name:"City",sortable:!0,order:"asc",size:150},{prop:"state",name:"State",sortable:!0,order:"asc",size:150},{prop:"zip",name:"ZIP",sortable:!0,order:"asc",size:200},{prop:"address",name:"Address",sortable:!0,order:"asc",size:200},{prop:"phone",name:"Phone",sortable:!0,order:"asc",size:200},{prop:"email",name:"Email",sortable:!0,order:"asc",size:200},{prop:"cardNumber",name:"Card",sortable:!0,order:"asc",size:200,pin:"colPinEnd"},{prop:"cardExpiry",name:"Expiry",sortable:!0,order:"asc",size:80,pin:"colPinEnd"},{prop:"cardCVV",name:"CVV",sortable:!0,order:"asc",size:80,pin:"colPinEnd"}]}),methods:{getData(){this.$store.dispatch("data/download",{date:this.date,token:this.$store.state.auth.profileToken}),this.toggleCal=!1}}},[["render",function(s,l,r,i,c,u){const m=t("it-button"),g=t("DatePicker"),h=t("it-textarea"),y=t("v-grid");return e(),a("section",null,[o("div",q,[o("div",K,[o("div",W,[c.toggleCal||"initial"===c.toggleCal?(e(),a("div",B,[o("div",F,[n(m,{onClick:l[0]||(l[0]=t=>u.getData()),type:"primary",disabled:!c.date,icon:"south",text:""},null,8,["disabled"]),n(m,{onClick:l[1]||(l[1]=t=>c.toggleCal=!c.toggleCal),type:"primary",icon:"chevron_right",text:""})]),n(g,{"max-date":new Date,class:"datePicker",modelValue:c.date,"onUpdate:modelValue":l[2]||(l[2]=t=>c.date=t),color:"indigo","is-range":"","is-expanded":""},null,8,["max-date","modelValue"])])):p("",!0),c.toggleCal?p("",!0):(e(),a("div",G,[o("div",J,[n(m,{onClick:l[3]||(l[3]=t=>c.toggleCal=!c.toggleCal),type:"primary",icon:"chevron_left",text:""})]),n(h,{class:"textArea",modelValue:s.$store.state.data.downloadedData,"onUpdate:modelValue":l[4]||(l[4]=t=>s.$store.state.data.downloadedData=t)},null,8,["modelValue"])]))])]),o("div",U,[s.$store.state.data.logsData?(e(),d(y,{key:0,theme:"material",class:"cardsTable",source:s.$store.state.data.logsData,columns:c.columns,resize:!0,readonly:!0},null,8,["source","columns"])):p("",!0)])])])}],["__scopeId","data-v-2ea7faca"]]),Q=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Z});const X=g({name:"App",components:{statsComponent:R,logsComponent:Z},data:()=>({fetchData:[],statsData:null}),created(){this.$store.dispatch("data/list",this.$store.state.auth.profileToken)}}),Y={class:"pageContainer"},tt={class:"rightNav"},et={class:"mainNav"};var at=T(X,[["render",function(s,l,r,i,c,p){const m=t("it-button"),g=t("router-view");return e(),a("div",Y,[o("nav",null,[o("div",tt,[n(m,{icon:"chevron_left",onClick:l[0]||(l[0]=t=>s.$store.dispatch("auth/logout")&&s.$router.push("/login")),text:""})]),o("div",et,[n(m,{icon:"show_chart",onClick:l[1]||(l[1]=t=>s.$router.push({name:"stats"})),type:"/stats"===s.$router.currentRoute.value.path?"primary":"",text:""},null,8,["type"]),n(m,{icon:"payment",onClick:l[2]||(l[2]=t=>s.$router.push({name:"logs"})),type:"/logs"===s.$router.currentRoute.value.path?"primary":"",text:""},null,8,["type"])])]),n(g,null,{default:u((({Component:t})=>[n(h,{name:"route",mode:"out-in"},{default:u((()=>[(e(),d(y(t)))])),_:2},1024)])),_:1})])}]]);const ot={},st=function(t,e){return e&&0!==e.length?Promise.all(e.map((t=>{if((t=`/${t}`)in ot)return;ot[t]=!0;const e=t.endsWith(".css"),a=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${a}`))return;const o=document.createElement("link");return o.rel=e?"stylesheet":"modulepreload",e||(o.as="script",o.crossOrigin=""),o.href=t,document.head.appendChild(o),e?new Promise(((t,e)=>{o.addEventListener("load",t),o.addEventListener("error",e)})):void 0}))).then((()=>t())):t()};var nt=new class{login(t){return f.post("/login",{token:t}).then((t=>(t.data.accessToken&&localStorage.setItem("profileToken",JSON.stringify(t.data)),t.data))).catch((t=>t))}validate(t){return f.post("/validate",{accessToken:t}).then((t=>t.data))}};const lt=JSON.parse(localStorage.getItem("profileToken")),rt={namespaced:!0,state:lt?{status:{loggedIn:!0},profileToken:lt}:{status:{loggedIn:!1},profileToken:null},actions:{login:({commit:t},e)=>nt.login(e).then((e=>(t("loginSuccess",e),ut.push("/stats"),Promise.resolve(e))),(e=>(t("loginFailure"),Promise.reject(e)))),validate:({commit:t},e)=>nt.validate(e).then((t=>Promise.resolve(e)),(e=>(nt.logout(),t("logout"),Promise.reject(e)))),logout({commit:t}){localStorage.removeItem("profileToken"),ut.push("/logout"),t("logout")}},mutations:{loginSuccess(t,e){t.status.loggedIn=!0,console.log(e),t.profileToken=e},loginFailure(t){t.status.loggedIn=!1,t.profileToken=null},logout(t){t.status.loggedIn=!1,t.profileToken=null}}};var it=new class{getData(t){return f.post("/list",t).then((t=>t.data))}downloadData(t,e){return console.log(e),t.token=e.token,t.accessToken=e.accessToken,f.post("/dl",t).then((t=>(console.log(t.data),t.data)))}};const ct=v({modules:{auth:rt,data:{namespaced:!0,state:{statsData:null,logsData:null,downloadedData:null},actions:{list:({commit:t},e)=>it.getData(e).then((e=>(t("setStats",e.stats),t("setLogs",e.actualData),Promise.resolve(e))),(t=>(localStorage.removeItem("profileToken"),ut.push("/logout"),Promise.reject(t)))),download:({commit:t},{date:e,token:a})=>it.downloadData(e,a).then((e=>(t("setDl",e.data),Promise.resolve(e.data))),(t=>(localStorage.removeItem("profileToken"),ut.push("/logout"),Promise.reject(t))))},mutations:{setStats(t,e){t.statsData=e},setLogs(t,e){t.logsData=e},setDl(t,e){t.downloadedData=e}}}}}),dt=[{path:"/stats",name:"stats",component:()=>st((()=>Promise.resolve().then((function(){return H}))),void 0)},{path:"/logs",name:"logs",component:()=>st((()=>Promise.resolve().then((function(){return Q}))),void 0)},{path:"/login",name:"login",component:()=>st((()=>import("./loginComponent.0b5666dc.js")),["assets/loginComponent.0b5666dc.js","assets/loginComponent.85db0f4c.css","assets/vendor.088e19da.js"])}],ut=k({history:C(),routes:dt});ut.beforeEach(((t,e,a)=>{const o=!["/login"].includes(t.path),s=localStorage.getItem("profileToken");o&&!s?a("/login"):a()}));_(at).use(ut).use(S).use(D,f).use(ct).use(b,{}).component("Calendar",P).component("DatePicker",w).mount("#app");export{T as _};
